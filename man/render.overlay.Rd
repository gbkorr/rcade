% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/render.R
\name{render.overlay}
\alias{render.overlay}
\title{Overlay Two Matrices}
\usage{
render.overlay(background, sprite, x = 1, y = 1, invert = FALSE)
}
\arguments{
\item{background}{A sprite; a matrix of nonnegative integers corresponding to the pixels of a small image; see \code{\link[=render.matrix]{render.matrix()}}.}

\item{sprite}{Another sprite to overlay on \code{background}.}

\item{x}{X coordinate of where the sprite should be drawn on the scene. Specifically, this determines the position of top-left pixel of the sprite.}

\item{y}{Y coordinate for the same purpose.}

\item{invert}{Whether or how \code{background} should have its colors inverted; see below.}
}
\value{
Returns \code{background} with \code{sprite} drawn on it.
}
\description{
This function overlays two sprites, respecting transparency (values of 0).

Specifically, \code{sprite} is placed on top of \code{background}, and its position can be altered by specifying \code{x} and \code{y}. Then the new \code{background} with the sprite atop it is returned; any part of \code{sprite} outside its bounds is ignored.
}
\section{Inversion}{

Non-\code{FALSE} values of \code{invert} will invert the colors of \code{background} where \code{sprite} is opaque (nonzero).

If \code{invert} is \code{TRUE}, \code{background} is assumed to be monochrome and values of 1 and 2 (black and white) are swapped.

If \code{invert} is a vector of values, it will be used as an ordered lookup for how to invert the values \verb{0, 1, 2, 3, etc.} in \code{background}. For example, \code{c(1,2,1)} will change 0->1, 1->2, and 2->1 and throw an error if \code{background} contains a value higher than 2.

This is mainly to provide functionality for multicolor systems, where the function wouldn't know how to invert arbitrary values.
}

\section{Conceptual Usage}{

NOTE: this function will clip out any part of \code{sprite} that falls out of bounds of \code{background}; in these examples, the boxes are padded with extra space.

\if{html}{\out{<div class="sourceCode">}}\preformatted{   = 0 (transparent)
[] = 1 (black)
.  = 2 (white)


[][][][][]                    [][][][][]
[]. . . []                    []. . . []
[]. . . []     [][][][][]     []. [][][][][]
[]. . . []  +  []. . . []  =  []. []. . . []
[][][][][]     []. . . []     [][][]. . . []
               []. . . []         []. . . []
               [][][][][]         [][][][][]

Transparency:

[][][][][]                    [][][][][]
[]      []                    []      []
[]      []     [][][][][]     []  [][][][][]
[]      []  +  []      []  =  []  []  []  []
[][][][][]     []      []     [][][][][]  []
               []      []         []      []
               [][][][][]         [][][][][]

Inversion:

[][][][][]. .                     [][][][][]. .
[][][][][]. .                     [][][][][]. .
[][][][][]. .      [][][][][]     [][]. . . [][]
[][][][][]. .   ~  [][][][][]  =  [][]. . . [][]
[][][][][]. .      [][][][][]     [][]. . . [][]
. . . . . . .      [][][][][]     . . [][][][][]
. . . . . . .      [][][][][]     . . [][][][][]

}\if{html}{\out{</div>}}

\if{html}{\out{<div class="sourceCode r">}}\preformatted{  print('wow')
#> [1] "wow"
}\if{html}{\out{</div>}}

\link{i hate these examples}
}

\examples{
bg = matrix(2,7,7)

box = matrix(1,5,5)
box.white = box; box.white[2:4,2:4] = 2
box.transparent = box; box.transparent[2:4,2:4] = 0

#using pipes for conciseness; see ?pipeOp
#example 1
bg |>
  render.overlay(box.white) |>
  render.overlay(box.white, 3, 3) |>
  render.matrix()

#transparency
bg |>
  render.overlay(box.transparent) |>
  render.overlay(box.transparent, 3, 3) |>
  render.matrix()

#inversion
bg |>
  render.overlay(box) |>
  render.overlay(box, 3, 3, invert=TRUE) |>
  render.matrix()
}
