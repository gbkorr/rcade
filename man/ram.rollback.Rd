% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gameloop.R
\name{ram.rollback}
\alias{ram.rollback}
\title{Execute a Rollback}
\usage{
ram.rollback(RAM)
}
\arguments{
\item{RAM}{\href{ram.init}{RAM} object.}
}
\description{
Restores the RAM state from several seconds ago. \code{\link[=ram.update]{ram.update()}} will then rapidly advance the game to catch up with the current time.

This is usually triggered by \code{\link[=inputs.read]{inputs.read()}} upon registering an input that was supposed to have happened, but didn't because it was received late. To prevent the input from being dropped, the game rolls back and reruns the past few seconds to rectify the mistake.
}
\section{Backups}{

RAM always keeps a backup of itself saved in RAM$backup, containing the entire RAM from the time of the backup minus inputs, debug info, and the ROM; these are never rolled back.

Backups have a minimum age of \code{RAM$ROM$backup_duration}; the RAM can only be restored to around that time ago. Backups are saved during \code{\link[=ram.tick]{ram.tick()}}.

RAM$intermediate is used to store the next backup before it replaces the current one, to ensure that backups are never younger than \code{RAM$ROM$backup_duration}.
}

\section{Rollback}{

This function just restores RAM$backup with

\if{html}{\out{<div class="sourceCode">}}\preformatted{RAM = utils::modifyList(RAM, RAM$backup)
}\if{html}{\out{</div>}}

Since this puts RAM$time behind, the gameloop automatically speeds up to catch the RAM back up.

This catchup process runs the inputs again, so if any inputs were received late, they will now be registered on time.
}

